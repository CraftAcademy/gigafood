<h1><%= t('order') %></h1>

<div class="float-left main-order-container">
  <table width="100%">
    <tr>
      <th><%= t('dish') %></th>
      <th style="width: 130px; text-align: center;"><%= t('quantity') %></th>
      <th style="text-align: center;"><%= t('price') %></th>
    </tr>
    <% @order.shopping_cart_items.each do |order_item| %>
      <tr id="<%= "order_row_#{order_item.item.id}" %>">
        <td><%= order_item.item.name %></td>
        <td style="width: 130px; text-align: center;"><%= order_item.quantity %></td>
        <td style="white-space: nowrap; width: 130px; text-align: right;"><%= humanized_money_with_symbol(order_item.quantity * order_item.price) %></td>
      </tr>
    <% end %>
  </table>
  <br>
  <span class="float-right">
    <div><%= t('total_sub') %> <%= humanized_money_with_symbol @order.subtotal %></div>
    <div><%= t('total_tax') %> <%= humanized_money_with_symbol @order.taxes %></div>
    <div><strong><%= t('total_price') %> <%= humanized_money_with_symbol @order.total %></strong></div>
  </span>
</div>
<br>

<div class="clear">&nbsp;</div>

<%= form_for @order do |f| %>
  <div class="float-left order-container">
    <h4><%= t('allergy_header') %></h4>
    <p><%= t('allergy') %></p>
    <%= f.text_area :allergies, placeholder: 'Allergies', cols: 50, rows: 6 %>
  </div>

  <div class="float-left order-container">
    <h4><%= t('delivery_info') %></h4>
    <%= f.datetime_field :delivery_date, placeholder: 'Delivery Date', class: 'input-wide', required: true, min: Date.today+1 %>
    <br>
    <%= radio_button_tag(:delivery_method, 'pickup') %>
    <%= label_tag(:delivery_method_pickup, t('pickup').html_safe ) %>
    <br>
    <%= radio_button_tag(:delivery_method, 'delivery', checked:'true') %>
    <%= label_tag(:delivery_method_delivery, t('delivery').html_safe ) %>
  </div>

  <div class="clear">&nbsp;</div>

  <div class="float-left order-container">
    <h4><%= t('billing_addres') %></h4>
    <%= f.text_field :billing_name, placeholder: 'Billing Name', class: 'input-wide', required: true %>
    <%= f.text_field :billing_company, placeholder: 'Billing Company', class: 'input-wide', required: true %>
    <%= f.text_field :billing_org_nr, placeholder: 'Billing Organisation Number', class: 'input-wide', required: true %>
    <%= f.text_field :billing_address, placeholder: 'Billing Address', class: 'input-wide', required: true %>
    <%= f.text_field :billing_postal_code, id: 'Billing_Postal_Code', placeholder: 'Postal Code', class: 'input-small', required: true %>
    <%= f.text_field :billing_city, placeholder: 'Billing City', class: 'input-medium', required: true %>
    <%= f.text_field :billing_phone, placeholder: 'Billing Contact Phone', class: 'input-wide', required: true %>
    <%= f.text_field :billing_email, placeholder: 'Billing email', class: 'input-wide', required: true %>
  </div>

  <div id="delivery_address_fields" class="float-left order-container">
    <h4><%= t('delivery_address') %></h4>
    <%= f.text_field :delivery_name, placeholder: 'Delivery Name', class: 'input-wide' %>
    <%= f.text_field :delivery_address, placeholder: 'Delivery Address', class: 'input-wide' %>
    <%= f.text_field :delivery_postal_code, id: 'Delivery_Postal_Code', placeholder: 'Postal Code', class: 'input-small' %>
    <%= f.text_field :delivery_city, placeholder: 'Delivery City', class: 'input-medium' %>
    <%= f.text_field :delivery_floor, placeholder: 'Delivery Floor', class: 'input-wide' %>
    <%= f.text_field :delivery_door_code, placeholder: 'Delivery Door Code', class: 'input-wide' %>
    <%= f.text_field :delivery_contact_name, placeholder: 'Delivery Contact Name', class: 'input-wide' %>
    <%= f.text_field :delivery_contact_phone_number, placeholder: 'Delivery Contact Phone', class: 'input-wide' %>
  </div>

  <div class="clear">&nbsp;</div>

  <div class="float-right order-container">
    <%= f.hidden_field :status, placeholder: 'Status', value: 'submitted' %>
    <%= f.submit t('button.submit'), class: 'button float-right' %>
  </div>

<% end %>
