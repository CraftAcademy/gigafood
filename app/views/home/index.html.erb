<h1>MENU</h1>
<p class="center">Our menu is <strong>100% plant-based</strong> and <strong>vegan</strong>. Weâ€™re committed to always use organic ingredients as far as possibly possible. Our packaging is 100% compostable and our delivery service is made by cargo bike. All our food and desserts are made without white refined sugar and no added gluten.</p>
<br>

<h2>MAINS</h2>

<div class="container">
  <% @dishes.each do |dish| %>
    <div>
      <div class="menu-item-form">
        <%= dish.price %> SEK <br>
        <input class="q_text" type="text" name="" value="" id="dish_<%= dish.id %>"
               placeholder="0" size="5" maxlength="4"
               onblur="validateNumberOnBlur(this)" onkeyup="validateNumber(this)"
               onclick="validateNumber(this)" onchange="validateNumber(this)" >
        <button class="q_button" type="button" name="button" onclick="decreaseNumber('dish_1')"> - </button>
        <button class="q_button" type="button" name="button" onclick="increaseNumber('dish_1')"> + </button>
      </div>
      <div class="menu-item-title"><%= dish.name %></div>
      <div><%= dish.description %></div>
    </div>
  <% end %>
</div>


<script type="text/javascript" >
    function validateNumber(object)
    {
        if (isNaN(object.value))
        {
            object.value = object.value.replace(/[^0-9]/g, '');
        }

        if (object.value == 0)
        {
            object.value = '';
        }

    }

    function validateNumberOnBlur(object)
    {
        if (object.value < 10  && object.value != '')
        {
            swal({
                    title: 'Oops...',
                    text: 'Min order is 10!',
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#2dbc36',
                    confirmButtonText: 'Yes, please change to 10!',
                    cancelButtonText: 'No, please change to 0!',
                    closeOnConfirm: true,
                    closeOnCancel: true,
                },
                function (isConfirm) {
                    if (isConfirm) {
                        object.value = 10;
                    } else {
                        object.value = '';
                    }
                });

        }

        if (object.value == 0)
        {
            object.value = '';
        }

    }

    function decreaseNumber(dishId)
    {
        if (document.getElementById(dishId).value > 10)
        {
            document.getElementById(dishId).value = document.getElementById(dishId).value - 1;
        } else if (document.getElementById(dishId).value == 10)
        {
            document.getElementById(dishId).value = '';
        }
    }

    function increaseNumber(dishId)
    {
        if (document.getElementById(dishId).value == '' || document.getElementById(dishId).value < 9)
        {
            document.getElementById(dishId).value = 10;
        } else if (document.getElementById(dishId).value < 9999)
        {
            document.getElementById(dishId).value = parseInt(document.getElementById(dishId).value) + 1;
        }

    }

</script>
